result = [['07/01/2022', ['2122', 'ISEN', 'CIR1', 'S1', 'WEB', 'P1'], 'Partiel de Technologies Web', ' 16.60', '24'], ['06/01/2022', ['2122', 'ISEN', 'CIR1', 'S1', 'PROG1', 'P1'], 'Epreuve de Partiel', ' 16.20', '40'], ['05/01/2022', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'P1'], 'Epreuve de Partiel', '  4.00', '60'], ['03/01/2022', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'P1'], 'Partiel de Mathématiques', '  4.00', '1'], ['10/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'CC5'], 'Contrôle Continu de Mathématiques n°5', '  6.40', '1'], ['10/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'WEB', 'CC2'], 'Contrôle Continu de Technologies Web n°2', ' 12.67', '12'], ['09/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'DS'], "Devoir Surveillé d'Électronique", '  7.00', '1'], ['08/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'TP4', '1'], 'Evaluation du TP4', ' 19.00', '1'], ['06/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ANGLAIS', '1', 'NOTE'], "Moyenne d'Anglais (groupe 1)", ' 14.04', '1'], ['06/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'SPORT', 'T1'], 'Note de Sport Tiers 1', ' 15.00', '1'], ['06/12/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'WEB', 'PROJ'], 'Projet de Technologies Web', ' 15.00', '20'], ['26/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'CC4'], 'Contrôle Continu de Mathématiques n°4', '  7.10', '1'], ['26/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'PROG1', 'CC2'], 'Contrôle Continu n°2', ' 13.75', '1'], ['24/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'IE3'], 'Interrogation de cours n°3', '  0.00', '0,33'], ['24/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'IE3'], 'Interrogation de cours n°3', '  0.00', '1'], ['24/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'TP3', '1'], 'Evaluation du TP3', ' 14.00', '1'], ['19/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'WEB', 'DS'], 'DS Technologies Web', ' 15.12', '12'], ['17/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'IE2'], 'Interrogation de cours n°2', '  8.00', '0,33'], ['17/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'IE2'], 'Interrogation de cours n°2', '  8.00', '1'], ['17/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH', 'TP4', '1'], 'Evaluation du TP4', ' 17.00', '1'], ['13/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH1', 'P2'], 'Examen de Mathématiques (seconde session)', ' 11.25', '1'], ['12/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'CC'], "Contrôle Continu d'Electronique", ' 11.50', '1'], ['12/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'CC3'], 'Contrôle Continu de Mathématiques n°3', ' 12.00', '1'], ['10/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'IE1'], 'Interrogation de cours n°1', ' 15.00', '0,33'], ['10/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH2', 'IE1'], 'Interrogation de cours n°1', ' 15.00', '1'], ['10/11/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'TP2', '1'], 'Evaluation du TP2', ' 10.00', '1'], ['22/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'PROG1', 'DS'], 'Devoir surveillé de Programmation', ' 17.20', '20'], ['20/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH', 'TP3', '1'], 'Evaluation du TP3', ' 17.00', '1'], ['15/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH1', 'P1'], 'Partiel de Mathématiques', '  3.50', '1'], ['15/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH1', 'P1'], 'Partiel de Mathématiques', '  3.50', '2'], ['13/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'ELEC', 'TP1', '1'], 'Evaluation du TP1', ' 13.00', '1'], ['08/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'OPTIQUE', 'P1'], "Partiel d'Optique Géométrique", '  9.00', '1'], ['04/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'COMM', 'ORAL'], 'Exposé oral', ' 17.00', '1'], ['01/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH1', 'CC2'], 'Contrôle Continu de Mathématiques n°2', ' 11.00', '1'], ['01/10/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'WEB', 'CC'], 'Contrôle Continu de Technologies Web n°1', ' 13.94', '12'], ['24/09/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'PROG1', 'CC1'], 'Contrôle Continu de Programmation', ' 11.67', '1'], ['17/09/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH1', 'CC1'], 'Contrôle Continu de Mathématiques n°1', '  9.80', '1'], ['17/09/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'OPTIQUE', 'CC'], "Contrôle Continu d'Optique Géométrique", ' 13.00', '1'], ['10/09/2021', ['2122', 'ISEN', 'CIR1', 'S1', 'MATH1', 'CC0'], 'QCM mathématiques de rentrée', ' 14.50']]
import locale
locale.setlocale(locale.LC_ALL, 'fr_FR')
# Calcul par rapport au coef des notes de result
def matiere(result):
    Notes = []
    Coefs = []
    for i in range (len(result)):
        # print(result[i])
        if (len(result[i]) == 5):
            Notes.append(float(locale.atof(result[i][3])))
            Coefs.append(float(locale.atof(result[i][4])))
    return Notes,Coefs
# moyenne a partir d'une liste de note du module
def Moyenne(Notes):
    return sum(Notes)/len(Notes)
def MoyenneC(Notes, Coefs):
    return sum(Notes[g] * Coefs[g] / sum(Coefs) for g in range(len(Notes)))


elec,partiel,TP,coef = [],[],[],3
for i in range(len(result)):
    if ("ELEC" in result[i][1]) : 
        if (("P1" in result[i][1]) or ("P2" in result[i][1])):
            if (result[i][1] != result[i-1][1]):
                partiel.append(result[i])
        elif (("TP" in result[i][1][5])) :
            if (result[i][1] != result[i-1][1]):
                TP.append(result[i])
        else:
            if (result[i][1] != result[i-1][1]):
                elec.append(result[i])
                
note = Moyenne(matiere(elec)[0])
# print(note)
notep = Moyenne(matiere(partiel)[0])
# print(notep)

TPelec = Moyenne(matiere(TP)[0])
# print(notetp)

noteelec = (note*0.4) + (notep*0.6)
# print(noteelec,TPelec)




opt,partiel,coef = [],[],2
for i in range(len(result)):
    if ("OPTIQUE" in result[i][1]) : 
        if (("P1" not in result[i][1]) and ("P2" not in result[i][1])):
            if (result[i][1] != result[i-1][1]):
                opt.append(result[i])
        else:
            if (result[i][1] != result[i-1][1]):
                partiel.append(result[i])
                

note = Moyenne(matiere(opt)[0])
notep = Moyenne(matiere(partiel)[0])
# print(note,notep)
noteopt = (note*0.4) + (notep*0.6)
# print(noteopt)

note = [noteopt, noteelec, TPelec]
coef = [2,3,3]
final = MoyenneC(note, coef)

print(final)