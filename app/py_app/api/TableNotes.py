from bs4 import BeautifulSoup


data = '''<tr data-ri="0" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">07/01/2022</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_WEB_P1</span></td><td role="gridcell" class=""><span class="preformatted ">Partiel de Technologies Web</span></td><td role="gridcell" class=""><span class="preformatted "> 16.60</span></td><td role="gridcell" class=""><span class="preformatted ">24</span></td><td role="gridcell" class=""></td></tr><tr data-ri="1" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">05/01/2022</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_ELEC_P1</span></td><td role="gridcell" class=""><span class="preformatted ">Epreuve de Partiel</span></td><td role="gridcell" class=""><span class="preformatted ">  4.00</span></td><td role="gridcell" class=""><span class="preformatted ">60</span></td><td role="gridcell" class=""></td></tr><tr data-ri="2" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">10/12/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_CC5</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Mathématiques n°5</span></td><td role="gridcell" class=""><span class="preformatted ">  6.40</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="3" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">10/12/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_WEB_CC2</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Technologies Web n°2</span></td><td role="gridcell" class=""><span class="preformatted "> 12.67</span></td><td role="gridcell" class=""><span class="preformatted ">12</span></td><td role="gridcell" class=""></td></tr><tr data-ri="4" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">09/12/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_ELEC_DS</span></td><td role="gridcell" class=""><span class="preformatted ">Devoir Surveillé d'Électronique</span></td><td role="gridcell" class=""><span class="preformatted ">  7.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="5" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">08/12/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_ELEC_TP4_1</span></td><td role="gridcell" class=""><span class="preformatted ">Evaluation du TP4</span></td><td role="gridcell" class=""><span class="preformatted "> 19.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="6" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">06/12/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_ANGLAIS_1_NOTE</span></td><td role="gridcell" class=""><span class="preformatted ">Moyenne d'Anglais (groupe 1)</span></td><td role="gridcell" class=""><span class="preformatted "> 14.04</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="7" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">06/12/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_SPORT_T1</span></td><td role="gridcell" class=""><span class="preformatted ">Note de Sport Tiers 1</span></td><td role="gridcell" class=""><span class="preformatted "> 15.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="8" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">26/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_CC4</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Mathématiques n°4</span></td><td role="gridcell" class=""><span class="preformatted ">  7.10</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="9" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">26/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_PROG1_CC2</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu n°2</span></td><td role="gridcell" class=""><span class="preformatted "> 13.75</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="10" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">24/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_IE3</span></td><td role="gridcell" class=""><span class="preformatted ">Interrogation de cours n°3</span></td><td role="gridcell" class=""><span class="preformatted ">  0.00</span></td><td role="gridcell" class=""><span class="preformatted ">0,33</span></td><td role="gridcell" class=""></td></tr><tr data-ri="11" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">24/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_IE3</span></td><td role="gridcell" class=""><span class="preformatted ">Interrogation de cours n°3</span></td><td role="gridcell" class=""><span class="preformatted ">  0.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="12" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">24/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_ELEC_TP3_1</span></td><td role="gridcell" class=""><span class="preformatted ">Evaluation du TP3</span></td><td role="gridcell" class=""><span class="preformatted "> 14.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="13" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">19/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_WEB_DS</span></td><td role="gridcell" class=""><span class="preformatted ">DS Technologies Web</span></td><td role="gridcell" class=""><span class="preformatted "> 15.12</span></td><td role="gridcell" class=""><span class="preformatted ">12</span></td><td role="gridcell" class=""></td></tr><tr data-ri="14" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">17/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_IE2</span></td><td role="gridcell" class=""><span class="preformatted ">Interrogation de cours n°2</span></td><td role="gridcell" class=""><span class="preformatted ">  8.00</span></td><td role="gridcell" class=""><span class="preformatted ">0,33</span></td><td role="gridcell" class=""></td></tr><tr data-ri="15" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">17/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_IE2</span></td><td role="gridcell" class=""><span class="preformatted ">Interrogation de cours n°2</span></td><td role="gridcell" class=""><span class="preformatted ">  8.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="16" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">13/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH1_P2</span></td><td role="gridcell" class=""><span class="preformatted ">Examen de Mathématiques (seconde session)</span></td><td role="gridcell" class=""><span class="preformatted "> 11.25</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="17" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">12/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_ELEC_CC</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu d'Electronique</span></td><td role="gridcell" class=""><span class="preformatted "> 11.50</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="18" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">12/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_CC3</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Mathématiques n°3</span></td><td role="gridcell" class=""><span class="preformatted "> 12.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="19" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">10/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_IE1</span></td><td role="gridcell" class=""><span class="preformatted ">Interrogation de cours n°1</span></td><td role="gridcell" class=""><span class="preformatted "> 15.00</span></td><td role="gridcell" class=""><span class="preformatted ">0,33</span></td><td role="gridcell" class=""></td></tr><tr data-ri="20" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">10/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH2_IE1</span></td><td role="gridcell" class=""><span class="preformatted ">Interrogation de cours n°1</span></td><td role="gridcell" class=""><span class="preformatted "> 15.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="21" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">10/11/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_ELEC_TP2_1</span></td><td role="gridcell" class=""><span class="preformatted ">Evaluation du TP2</span></td><td role="gridcell" class=""><span class="preformatted "> 10.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="22" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">22/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_PROG1_DS</span></td><td role="gridcell" class=""><span class="preformatted ">Devoir surveillé de Programmation</span></td><td role="gridcell" class=""><span class="preformatted "> 17.20</span></td><td role="gridcell" class=""><span class="preformatted ">20</span></td><td role="gridcell" class=""></td></tr><tr data-ri="23" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">15/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH1_P1</span></td><td role="gridcell" class=""><span class="preformatted ">Partiel de Mathématiques</span></td><td role="gridcell" class=""><span class="preformatted ">  3.50</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="24" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">15/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH1_P1</span></td><td role="gridcell" class=""><span class="preformatted ">Partiel de Mathématiques</span></td><td role="gridcell" class=""><span class="preformatted ">  3.50</span></td><td role="gridcell" class=""><span class="preformatted ">2</span></td><td role="gridcell" class=""></td></tr><tr data-ri="25" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">13/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_ELEC_TP1_1</span></td><td role="gridcell" class=""><span class="preformatted ">Evaluation du TP1</span></td><td role="gridcell" class=""><span class="preformatted "> 13.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="26" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">08/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_OPTIQUE_P1</span></td><td role="gridcell" class=""><span class="preformatted ">Partiel d'Optique Géométrique</span></td><td role="gridcell" class=""><span class="preformatted ">  9.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="27" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">04/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_COMM_ORAL</span></td><td role="gridcell" class=""><span class="preformatted ">Exposé oral</span></td><td role="gridcell" class=""><span class="preformatted "> 17.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="28" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">01/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH1_CC2</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Mathématiques n°2</span></td><td role="gridcell" class=""><span class="preformatted "> 11.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="29" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">01/10/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_WEB_CC</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Technologies Web n°1</span></td><td role="gridcell" class=""><span class="preformatted "> 13.94</span></td><td role="gridcell" class=""><span class="preformatted ">12</span></td><td role="gridcell" class=""></td></tr><tr data-ri="30" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">24/09/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_S1_PROG1_CC1</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Programmation</span></td><td role="gridcell" class=""><span class="preformatted "> 11.67</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="31" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">17/09/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH1_CC1</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu de Mathématiques n°1</span></td><td role="gridcell" class=""><span class="preformatted ">  9.80</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="32" class="ui-widget-content ui-datatable-even CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">17/09/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_OPTIQUE_CC</span></td><td role="gridcell" class=""><span class="preformatted ">Contrôle Continu d'Optique Géométrique</span></td><td role="gridcell" class=""><span class="preformatted "> 13.00</span></td><td role="gridcell" class=""><span class="preformatted ">1</span></td><td role="gridcell" class=""></td></tr><tr data-ri="33" class="ui-widget-content ui-datatable-odd CursorInitial" role="row"><td role="gridcell" class="TexAlLeft"><span class="preformatted ">10/09/2021</span></td><td role="gridcell" class=""><span class="preformatted ">2122_ISEN_CIR1_CNB1_S1_MATH1_CC0</span></td><td role="gridcell" class=""><span class="preformatted ">QCM mathématiques de rentrée</span></td><td role="gridcell" class=""><span class="preformatted "> 14.50</span></td><td role="gridcell" class=""></td><td role="gridcell" class=""></td></tr>'''



# def table(data):      # VERSION NON TEST
def table():            # VERSION TEST
    # traitement de la table
    soup = BeautifulSoup(data, 'lxml')

    # séparation des notes, dans une liste de liste sous la forme:
    # Date, Code, Nom, Note, Coef
    d = []
    i = 0
    for tr in (soup.select('tr')):
        d.append([]) 
        for sp in (tr.select('span')):
            d[i].append(sp.text)
        i+=1
    
    # transformation du Code en:
    # Annee, Lieu, Prepa, Semestre, Matiere, Type
    for i in range(len(d)):
        d[i][1] = str(d[i][1]).split("_")
        if "CNB1" in d[i][1]:
            d[i][1].remove("CNB1")
        if "CPG1" in d[i][1]:
            d[i][1].remove("CPG1")
    
    # for i in range(len(d)):
    #     d[i][2] = str(d[i][2]).split()
        
    # print(d[9])
    return d